; Supervisor Configuration for Unified Payment Poll Daemon
; Handles: QiosPay, OrderKuota
; Copy this file to /etc/supervisor/conf.d/payment-daemon.conf on your VPS

[program:payment-daemon]
; Command to run the unified payment polling daemon (5s interval)
command=php artisan payment:poll-daemon --interval=5

; Your Laravel project directory (UPDATE THIS PATH!)
directory=/var/www/spacedigital-dashboard

; Auto start when supervisor starts
autostart=true

; Auto restart if the process dies
autorestart=true

; User to run the process as
user=www-data

; Number of retries before giving up
startretries=3

; Log files for debugging
stdout_logfile=/var/log/supervisor/payment-daemon.log
stderr_logfile=/var/log/supervisor/payment-daemon-error.log

; Redirect stderr to stdout
redirect_stderr=true

; Stop signal
stopsignal=QUIT

; Priority (lower = starts first)
priority=10
